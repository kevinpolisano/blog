---
title: "Comment installer la librairie libQGLViewer sous Linux ?"
author: "Kévin Polisano"
date: "2013-03-28"
categories: [animation]
toc: true
toc-title: "Sommaire"
toc-location: left
reference-location: margin
citation-location: margin
---

**Qu'est-ce que QGLViewer ?**

C'est une librairie écrite en C++ basée sur <a href="http://fr.wikipedia.org/wiki/Qt" target="_blank">Qt</a> qui simplifie l'utilisation d'<a href="http://fr.wikipedia.org/wiki/OpenGL" target="_blank">OpenGL</a>, notamment en donnant la possibilité de bouger la caméra dans la scène 3D à l'aide de la souris.

**Où trouve-t-on cette librairie ?**

Sur le <a href="http://www.libqglviewer.com/" target="_blank">site officiel</a> bien sûr, mais son installation est parfois laborieuse au premier abord, c'est pourquoi je vais détailler la démarche à suivre pour installer cette librairie sous Linux.

# **Avant de commencer**

**<span style="color: #0000ff;">1. </span>**<span style="color: #0000ff;">Avoir qt4-qmake d'installé</span>

<span style="color: #333333;">C'est un outil générateur de Makefile qui nous sera utile pour compiler nos fichiers. Pour savoir si celui-ci est installé tapez simplement la commande suivante dans un terminal :</span>

<pre class="brush:shell">qmake-qt4</pre>

Si la sortie est :

<pre class="brush:shell">Usage: qmake-qt4 [mode] [options] [files]</pre>

C'est qu'il est déjà installé. Le cas échéant l'installer :

  * via votre gestionnaire de paquet (en ce qui me concerne la logithèque Ubuntu, ou sinon Synaptic, Aptitude, etc suivant votre OS) <a href="http://www.kevinpolisano.com/wp-content/uploads/qt4-qmake.png" data-rel="lightbox-image-0" data-rl\_title="" data-rl\_caption="" title=""><img loading="lazy" class="aligncenter size-medium wp-image-148" src="http://www.kevinpolisano.com/wp-content/uploads/qt4-qmake-300x248.png" alt="qt4-qmake" width="300" height="248" /></a>

  * ou manuellement en téléchargeant le fichier .deb sur internet, par exemple sous Ubuntu vous pouvez le récupérer <a href="http://packages.ubuntu.com/fr/quantal/qt4-qmake" target="_blank">à cette adresse</a>.

Ensuite pour <a href="http://doc.ubuntu-fr.org/tutoriel/comment_installer_un_paquet" target="_blank">installer le .deb</a> il vous suffit de taper la commande suivante à l'endroit où se trouve votre fichier .deb :

<pre class="brush:shell">sudo dpkg -i *.deb</pre>

**<span style="color: #0000ff;">2. </span>**<span style="color: #0000ff;">Avoir OpenGL d'installé</span>

<span style="color: #333333;">En général il est présent sur tous les ordinateurs récents, pour s'en assurer tapez la commande suivante dans un terminal :</span>

<pre class="brush:shell">glxinfo</pre>

Si cela vous affiche plein d'information c'est qu'OpenGL est installé, sinon on vous proposera d'installer le package mesa-utils, ce que vous allez faire en tapant :

<pre class="brush:shell">sudo apt-get install mesa-utils</pre>

Et voilà nous allons pouvoir en venir à l'installation de QGLViewer proprement dîtes.

# Installation de libQGLViewer

**<span style="color: #0000ff;">1. </span>**<span style="color: #0000ff;">Première solution (recommandée) : installation de libqglviewer-qt4</span>

  * <span style="color: #333333;">Utilisez votre gestionnaire de paquet préféré pour installer <strong>libqglviewer-qt4-dev </strong>et <strong>libqgl</strong><strong>viewer-qt4-2</strong></span>

<a href="http://www.kevinpolisano.com/wp-content/uploads/libqglviewer-dev.png" data-rel="lightbox-image-1" data-rl\_title="" data-rl\_caption="" title=""><img loading="lazy" class="aligncenter size-medium wp-image-153" src="http://www.kevinpolisano.com/wp-content/uploads/libqglviewer-dev-300x237.png" alt="libqglviewer-dev" width="300" height="237" /></a>

<a href="http://www.kevinpolisano.com/wp-content/uploads/libqglviewer-qt4-2.png" data-rel="lightbox-image-2" data-rl\_title="" data-rl\_caption="" title=""><img loading="lazy" class="aligncenter size-medium wp-image-154" src="http://www.kevinpolisano.com/wp-content/uploads/libqglviewer-qt4-2-300x233.png" alt="libqglviewer-qt4-2" width="300" height="233" /></a>

  *  ou manuellement en téléchargeant les fichiers .deb correspondant sur internet. Par exemple si vous êtes sur Ubuntu téléchargez par exemple les fichiers **libqglviewer-dev-common\_2.3.4-4ubuntu1\_all.deb** et **libqglviewer-qt4-2\_2.3.4-4ubuntu1\_i386.deb** et installez les comme tout à l'heure grâce à :

<pre class="brush:shell">sudo dpkg -i *.deb</pre>

Bien souvent les librairies installées par l'une ou l'autre des méthodes (par gestionnaire de paquets ou manuellement) se situent au mauvais endroit. Il va donc falloir les déplacer, et pour cela il faut avant tout les localiser sur le disque. Pour cela placez vous à la racine :

<pre class="brush:shell">cd /</pre>

Puis on va faire une recherche de tous les fichiers comportant le nom "QGLViewer" :

<pre class="brush:shell">sudo find . -type f -exec grep 'QGLViewer' {} \;</pre>

En sortie identifiez la ligne qui spécifie l'emplacement du fichier **libqglviewer-qt4.so**, pour ma part la ligne correspondante est :

<pre class="brush:shell">Fichier binaire ./x86_64-linux-gnu/libqglviewer-qt4.so concordant</pre>

Enfin pour installer la librairie au bon endroit on va simplement faire un lien symbolique :

<pre class="brush:shell">sudo ln -s libqglviewer-qt4.so /usr/lib/libQGLViewer.so</pre>

_**remarque** : si le fichier libQGLViewer.so existait déjà dans /usr/lib/ supprimez le (via rm -f libQGLViewer.so) avant d'effectuer le lien symbolique._

Si tout s'est bien déroulé, rendez-vous directement à la section suivante "Tester QGLViewer". Si le test se solde par un échec revenez ici essayer la deuxième alternative.

**<span style="color: #0000ff;">2. </span>**<span style="color: #0000ff;">Deuxième solution : installer libQGLViewer et Glut</span>

<span style="color: #333333;">Commencer par suivre les instructions du <a href="http://www.libqglviewer.com/installUnix.html#linux" target="_blank">site officiel</a> que je récapitule ci-après :<br /> </span>

Télécharger la dernière version du package (à ce jour 2.3.17) et l'extraire où vous voulez

<pre class="brush:shell">tar -xzf libQGLViewer-2.3.17.tar.gz</pre>

Personnellement le dossier se trouve ici :

<pre class="brush:shell">/home/kevin/Téléchargements/libQGLViewer-2.3.17</pre>

Se placer dans le dossier QGLViewer se trouvant à l'intérieur :

<pre class="brush:shell">cd libQGLViewer-2.3.17/QGLViewer</pre>

puis tapez les commandes suivantes :

<pre class="brush:shell">qmake
sudo make install</pre>

Si tout se passe bien vous devriez avoir le(s) fichier(s) **libQGLViewer.so** dans /usr/lib.

_**remarque** : avec cette version vous aurez besoin de glut comme librairie à la compilation._

Pour installer glut vous pouvez le faire encore une fois via votre gestionnaire de paquet, soit par ligne de commande :

<pre class="brush:shell">sudo apt-get install freeglut3-dev
sudo apt-get install libglut3-dev</pre>

# Tester QGLViewer

Nous allons tenter de compiler et d'exécuter un exemple minimaliste, <a href="http://www.kevinpolisano.com/Divers/simpleViewer.tar.gz" target="_blank">téléchargez</a> le.

Extraire le fichier .tar.gz et placez vous dans le dossier simpleViewer :

<pre class="brush:shell">tar -xzf simpleViewer.tar.gz
cd simpleViewer</pre>

La première chose à faire est d'éditer le fichier **viewer.pro** qui décrit comment va être généré le Makefile. Ouvrez ce fichier avec votre éditeur préféré :

<pre class="brush:shell">emacs viewer.pro &</pre>

Le fichier ressemble à cela :

<a href="http://www.kevinpolisano.com/wp-content/uploads/viewer\_pro.png" data-rel="lightbox-image-3" data-rl\_title="" data-rl_caption="" title=""><img loading="lazy" class="aligncenter size-medium wp-image-158" src="http://www.kevinpolisano.com/wp-content/uploads/viewer_pro-300x128.png" alt="viewer_pro" width="300" height="128" /></a>Les 2 champs qui nous intéressent sont :

  * **INCLUDEPATH** : Ici vous devez remplacer la ligne par le <span style="text-decoration: underline;">chemin exact</span> vers votre dossier libQGLViewer !
  * **LIBS** : Ce champ spécifie les librairies utilisées pour la compilation, si vous avez installer QGLViewer avec la première méthode (recommandée) alors ne touchez rien par défaut c'est libqglviewer-qt4 qui est utilisé dans ce .pro, sinon si vous avez utilisez la deuxième méthode alors il va falloir utiliser -lQGLViewer et glut (-lGL -lGLU), pour cela commenter le premier LIBS et décommenter le second, en remplaçant évidemment le chemin par votre chemin vers le dossier libQGLViewer/QGLViewer !

Enregistrez les modifications, puis dans un terminal (toujours dans le dossier simpleViewer où normalement vous vous trouvez) tapez :

<pre class="brush:shell">qmake-qt4</pre>

Cela aura pour effet de vous créer un fichier **Makefile**. Puis pour compiler tapez simplement :

<pre class="brush:shell">make</pre>

Ce qui produira un fichier exécutable **simpleViewer** que vous pouvez exécutez par :

<pre class="brush:shell">./simpleViewer</pre>

Si tout s'est bien passé vous devriez voir une fenêtre apparaître avec une jolie spirale en 3D que vous pouvez faire bouger à l'aide de la souris :

<a href="http://www.kevinpolisano.com/wp-content/uploads/spirale.png" data-rel="lightbox-image-4" data-rl\_title="" data-rl\_caption="" title=""><img loading="lazy" class="aligncenter size-medium wp-image-159" src="http://www.kevinpolisano.com/wp-content/uploads/spirale-300x198.png" alt="spirale" width="300" height="198" /></a>Et voilà votre librairie QGLViewer est installée et opérationnelle !