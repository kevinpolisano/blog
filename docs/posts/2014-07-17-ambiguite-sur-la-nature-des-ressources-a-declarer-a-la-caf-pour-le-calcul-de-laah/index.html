<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kévin Polisano">
<meta name="dcterms.date" content="2014-07-17">

<title>Ambigüité sur la nature des ressources à déclarer à la CAF pour le calcul de l’AAH – Blog de Kévin Polisano</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Blog de Kévin Polisano</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Kévin Polisano</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Ambigüité sur la nature des ressources à déclarer à la CAF pour le calcul de l’AAH</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">handicap</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Kévin Polisano </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">July 17, 2014</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block page-columns page-full" id="quarto-document-content">





<p>Pour pouvoir prétendre aux aides sociales délivrées par la Caisse d’Allocations Familiales (dont fait partie l’AAH = Allocation Adulte Handicapée), vous devez déclarer vos ressources de l’année N-2 (ou encore trimestriellement) auprès de celle-ci.</p>
<p style="text-align: left;">
Voyons ce que nous dit ce formulaire :
</p>
<p style="text-align: left;">
<img src="images/declarer-ressources-caf.png" class="img-fluid">
</p>
<p style="text-align: left;">
<strong>–&gt; D’accord. Quels revenus ?</strong>
</p>
<p style="text-align: left;">
Un peu plus bas on trouve en case n°2 à remplir :
</p>
<p style="text-align: left;">
<img src="images/formulaire-declaration-ressources.png" class="img-fluid">
</p>
<p style="text-align: left;">
<strong>–&gt; Très bien. Mais cela ne nous renseigne pas sur la nature des salaires à déclarer : brut ? net ? net global ? net imposable ?</strong>
</p>
<p style="text-align: left;">
Il faut dire que les définitions adoptées varient d’un organisme à l’autre, et qu’il est parfois difficile de savoir de quoi l’on parle exactement, la preuve :
</p>
<p style="text-align: left;">
<img src="images/notice-ressources.png" class="img-fluid">
</p>
<p style="text-align: left;">
<strong>–&gt; OK. Mais s’agit-il des revenus imposables figurant sur notre fiche de paie (cf.&nbsp;<a href="../2014-07-06-comprendre-son-bulletin-de-paie">Comprendre son bulletin de paie</a>) ou ceux considérés par l’administration fiscale lors du calcul de l’impôt (cf.&nbsp;<a href="../2014-07-15-quels-impots-pour-les-personnes-handicapees">Quels impôts pour les personnes handicapées ?</a>)</strong>
</p>
<p style="text-align: left;">
Un peu plus bas, une remarque nous met la puce à l’oreille :
</p>
<p style="text-align: left;">
<img src="images/salaires-abattements.png" class="img-fluid">
</p>
<p style="text-align: left;">
Puisqu’il s’agirait des salaires avant l’abattement fiscal de 10% (pour les frais professionnels), on peut en déduire que <strong><span style="color: #ff0000;">la CAF demande que l’on <span style="text-decoration: underline;">déclare</span> les salaires net imposables figurant sur la fiche de paie</span></strong>.
</p>
<p style="text-align: left;">
<strong>–&gt; OK. Mais est-ce que par la suite, la CAF, à partir de ce montant déclaré, va tout de même appliquer cet abattement de 10% dans son calcul de l’AAH ? Ou déduire le cas échéant les frais réels (puisqu’ils demandent de les renseigner) ?</strong>
</p>
<p style="text-align: left;">
La réponse est : <span style="color: #ff0000;"><strong>NON. Pas d’abattement de 10% ni de déductions de frais réels !</strong></span>
</p>
<p style="text-align: left;">
En effet dans la <a href="https://www.gisti.org/IMG/pdf/circ_cnaf_2010-11-17_suivi-legislatif-aah.pdf" target="_blank" class="broken_link">circulaire n°2010-013</a>, datant du 17 novembre 2010, qui intègre les nouvelles dispositions applicables depuis le 1er janvier 2011 et toujours en vigueur, on y trouve le tableau récapitulatif suivant (page 43 - AAH 36) :
</p>
<p style="text-align: left;">
<img src="images/abattements-fiscaux.png" class="img-fluid">
</p>
<p style="text-align: left;">
On peut effectivement y lire qu’aucun abattement fiscal n’est appliqué pour le bénéficiaire.
</p>
<p style="text-align: left;">
<strong>–&gt; Aah.. Mais que dit le droit dans tout ça ?</strong>
</p>
<p style="text-align: left;">
Bonne question, jetons un oeil aux textes de loi dont fait référence la CAF :
</p>
<p style="text-align: left;">
<img src="images/articles-ressources.png" class="img-fluid">
</p>
<p style="text-align: left;">
Article <a href="http://www.legifrance.gouv.fr/affichCodeArticle.do?idArticle=LEGIARTI000020986711&amp;cidTexte=LEGITEXT000006073189&amp;dateTexte=20140711&amp;oldAction=rechCodeArticle&amp;fastReqId=689224072&amp;nbResultRech=1" target="_blank">R.352-3</a>, <a href="http://www.legifrance.gouv.fr/affichCodeArticle.do;jsessionid=39FCDDD144634FBDD2A347A41691E7B0.tpdjo07v_1?cidTexte=LEGITEXT000006073189&amp;idArticle=LEGIARTI000020986739&amp;dateTexte=20140716&amp;categorieLien=id#LEGIARTI000020986739" target="_blank">R.831-6</a>, <a href="http://www.legifrance.gouv.fr/affichCodeArticle.do?idArticle=LEGIARTI000020986758&amp;cidTexte=LEGITEXT000006073189&amp;dateTexte=20140716&amp;oldAction=rechCodeArticle&amp;fastReqId=1073346423&amp;nbResultRech=1" target="_blank">D.542-10</a> du code la sécurité sociale, et l’article <a href="http://www.legifrance.gouv.fr/affichCodeArticle.do?idArticle=LEGIARTI000021632267&amp;cidTexte=LEGITEXT000006074096&amp;dateTexte=20140716&amp;oldAction=rechCodeArticle&amp;fastReqId=189978831&amp;nbResultRech=1" target="_blank">R.351-5</a> du code de l’habitat et de la construction. En fait ces quatre textes de lois, comme vous pouvez le remarquer, sont pratiquement du copier coller l’un de l’autre.
</p>
<p style="text-align: left;">
On va donc s’intéresser au plus complet d’entre eux, à savoir l’<a href="http://www.legifrance.gouv.fr/affichCodeArticle.do?idArticle=LEGIARTI000020986758&amp;cidTexte=LEGITEXT000006073189&amp;dateTexte=20140716&amp;oldAction=rechCodeArticle&amp;fastReqId=1073346423&amp;nbResultRech=1" target="_blank">article D.542-10</a> du code de la sécurité sociale.
</p>
<p style="text-align: left;">
<strong>–&gt; Que nous dit cet article ?</strong>
</p>
<p style="text-align: left;">
Plusieurs choses. Il est écrit :
</p>
<p style="text-align: left;">
<strong>“les ressources prises en considération s’entendent du total des revenus nets catégoriels retenus pour l’établissement de l’impôt sur le revenu”</strong>
</p>
<p style="text-align: left;">
D’après plusieurs sources<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, le <span style="color: #ff0000;">revenu net catégoriel</span> concernant la catégorie “traitements et salaires” obéissant à des règles spécifiques, <span style="color: #ff0000;">est calculé en déduisant les frais professionnels ou réels</span>&nbsp;<strong>donc en appliquant les 10% d’abattement</strong> ! C’est d’ailleurs bien ce montant après déduction qui est retenu pour le calcul des impôts (cf.&nbsp;<a href="../2014-07-15-quels-impots-pour-les-personnes-handicapees">Quels impôts pour les personnes handicapées ?</a>)
</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;Revenu catégoriel d’après&nbsp;<a href="http://www.legifiscal.fr/fiche-pratique/impot-sur-le-revenu-irpp/les-traitements-et-salaires.html" target="_blank">legifiscal</a></p></div><div id="fn2"><p><sup>2</sup>&nbsp;Revenu catégoriel d’après&nbsp;<a href="http://www.legifrance.gouv.fr/affichCode.do?idArticle=LEGIARTI000006300240&amp;idSectionTA=LEGISCTA000006179466&amp;cidTexte=LEGITEXT000006069576&amp;dateTexte=20020330" target="_blank">legifrance</a></p></div><div id="fn3"><p><sup>3</sup>&nbsp;Revenu net catégoriel d’après un <a href="http://books.google.fr/books?id=MsagAwAAQBAJ&amp;pg=PA331&amp;lpg=PA331&amp;dq=revenu+net+catégoriel+abattement+10&amp;source=bl&amp;ots=2ScQ36YvGo&amp;sig=YKn3lEfH0ncJtqHHEl2dNpL5pKo&amp;hl=fr&amp;sa=X&amp;ei=g6zHU_XXLOq30QWn34HQCg&amp;sqi=2&amp;redir_esc=y#v=onepage&amp;q=revenu%20net%20catégoriel%20abattement%2010&amp;f=false" target="_blank">livre de Comptabilité</a></p></div></div><p style="text-align: left;">
&nbsp;Par ailleurs il est même ajouté :
</p>
<p style="text-align: left;">
<strong>“les ressources prises en considération s’entendent du total des revenus nets catégoriels retenus pour l’établissement de l’impôt sur le revenu&nbsp;[…] <span style="color: #ff0000;">et après l’abattement mentionné à l’<a href="http://www.legifrance.gouv.fr/affichCodeArticle.do;jsessionid=8E3EFE998C22EB2F7C587E29E8A650C5.tpdjo07v_1?cidTexte=LEGITEXT000006069577&amp;idArticle=LEGIARTI000006307950&amp;dateTexte=&amp;categorieLien=cid" target="_blank">article 157 bis</a>&nbsp;du code général des impôts pour les personnes nées avant le 1er janvier 1931 ou invalides quel que soit leur âge</span>”</strong>
</p>
<p style="text-align: left;">
Cet article stipule de plus que pour des revenus n’excédant pas 14 630 € un <span style="text-decoration: underline;">abattement de 2332 € est appliqué</span>, et pour des revenus compris entre 14 630 € et 23 580 € l’<span style="text-decoration: underline;">abattement est de 1166 €</span>.
</p>
<p style="text-align: left;">
<img src="images/abattement-revenu-global.png" class="img-fluid">
</p>
<p style="text-align: left;">
Or&nbsp;<span style="color: #ff0000;"><strong>la CAF n’applique pas cet abattement</strong></span>, si on attend du bénéficiaire qu’il déduise lui-même cet abattement dans la déclaration des ressources, alors il serait recommandé de le renseigner dans la “Notice de déclaration de ressources” non ? Nul n’est censé ignorer la loi d’accord, mais même les conseillers de la CAF ne doivent pas avoir connaissance de cet abattement pourtant fort important dans le calcul des impôts&nbsp;(cf.&nbsp;<a href="../2014-07-15-quels-impots-pour-les-personnes-handicapees">Quels impôts pour les personnes handicapées ?</a>).
</p>
<p style="text-align: left;">
Notons que cet abattement <strong>s’applique sur le revenu net global</strong><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, dont la définition n’est à mon sens pas très claire, mais néanmoins ce qui est sur, c’est que dans le calcul des impôts, cet abattement apparait <span style="color: #ff0000;"><strong>après avoir déduit les 10% de frais professionnels</strong></span>&nbsp;(cf.&nbsp;<a href="../2014-07-15-quels-impots-pour-les-personnes-handicapees">Quels impôts pour les personnes handicapées ?</a>)
</p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;Article 1A du code général des impôts - <a href="http://www.legifrance.gouv.fr/affichCode.do?idArticle=LEGIARTI000006302199&amp;idSectionTA=LEGISCTA000006179568&amp;cidTexte=LEGITEXT000006069577&amp;dateTexte=20091231" target="_blank">lien</a></p></div></div><p style="text-align: left;">
<img src="images/abattement-handicap.png" class="img-fluid">
</p>
<p style="text-align: left;">
<span style="color: #0000ff;">[EDIT 2015]</span> : je suis tombé récemment sur l’<a href="http://www.legifrance.gouv.fr/affichCodeArticle.do;jsessionid=732EDD52D5D04CA385D51811BE2739F3.tpdila12v_2?cidTexte=LEGITEXT000006073189&amp;idArticle=LEGIARTI000023097776&amp;dateTexte=20150605&amp;categorieLien=cid#LEGIARTI000023097776" target="_blank">article R.821-4</a> du code de la sécurité sociale qui <span style="color: #ff0000;">contredit la prise en compte des abattements spécial invalidité</span>, en tout cas sur les revenus d’activités professionnelles.
</p>
<p style="text-align: left;">
<strong>–&gt; Et pourquoi avoir surligner en rose le passage en dessous ?</strong>
</p>
<p style="text-align: left;">
Je vois que vous suivez… 😀
</p>
<p style="text-align: left;">
Parce que ce qui me fait douter est que dans cet alinéa ils précisent que l’indemnité journalière est pris en considération <strong>après abattement prévu par l’article 83</strong> du code général des impôts, <strong>qui est précisément l’abattement des 10%</strong> de frais professionnels ou réels.
</p>
<p style="text-align: left;">
<img src="images/frais-professionnels.png" class="img-fluid">
</p>
<p style="text-align: left;">
Donc si précédemment ils ne précisaient rien, c’est peut-être que cet abattement n’aurait pas lieu d’être… et que le revenu global net serait constitué ni plus ni moins que des salaires net imposables figurant sur la fiche de paie sans abattement des 10%…
</p>
<p style="text-align: left;">
Mais alors comment expliquer que la définition des revenus net catégoriels à déclarer comprend visiblement l’abattement des 10%, et que de surcroît l’abattement spécial invalidité s’applique généralement après déduction des 10% ?!
</p>
<p style="text-align: left;">
<strong>–&gt; Qu’en pense l’APF ?</strong>
</p>
<p style="text-align: left;">
De leur côté il semblerait qu’ils revendiquent bel et bien la possibilité de déduire les frais professionnels de 10% ou frais réels<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>.
</p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;Notes juridiques de l’APF de septembre 2013 (p.11) - <a href="http://vos-droits.apf.asso.fr/files/Notesjuridiques/20150424_NJ%20AAH_MAJblog.2.pdf" target="_blank">lien</a></p></div></div><p style="text-align: left;">
<img src="images/revenu-net-categoriel.png" class="img-fluid">
</p>
<p style="text-align: left;">
Sur un autre site de l’APF ils abordent le problème des frais professionnels, et plus particulièrement des frais réels. Je cite :
</p>
<blockquote class="blockquote">
<p>Dans sa circulaire n° 2010-013 du 17 novembre 2010, la Caisse nationale d’allocations familiales affirme effectivement, s’agissant de la déclaration trimestrielle de ressources pour les allocataires percevant des revenus d’activité professionnelle :&nbsp;«&nbsp;<em>Pas de déduction de frais réels : application systématique d’un abattement de 10%</em>&nbsp;». Toutefois&nbsp;après une étude approfondie des textes en vigueur par le service juridique de l’APF,&nbsp;il s’avère que cette affirmation ne repose sur aucune base légale ou réglementaire mais sur les difficultés techniques qu’impliquerait la déduction des frais réels.</p>
</blockquote>
<p style="text-align: left;">
Il semblerait pour autant qu’il y ait une confusion de leur part… En effet sur cette page ils citent la circulaire et en particulier le tableau dont j’ai déjà parlé plus haut, or la remarque <strong>“Pas de déduction de frais réels : application systématique d’un abattement de 10%” <span style="color: #ff0000;">concerne</span></strong> <strong><span style="color: #ff0000;">uniquement la colonne du conjoint</span> <span style="color: #ff0000;">!</span></strong>
</p>
<p style="text-align: left;">
<img src="images/tableau-caf-abattement.png" class="img-fluid">
</p>
<p style="text-align: left;">
<strong>Pour conclure</strong>, je pense qu’<span style="color: #008000;"><strong>il serait légal de justifier auprès de la CAF la prise en compte de l’abattement des 10% de frais professionnels en s’appuyant sur la définition des revenus catégoriels net qui l’englobe effectivement</strong></span>. A ceci s’ajouterait la possibilité de <span style="text-decoration: underline;">faire valoir l’abattement spécial</span> lié à l’invalidité.
</p>
<p style="text-align: left;">
En attendant confirmation, la question reste donc ouverte, et mérite quelques éclaircissements. Si vous avez des infos qui viendraient compléter ou réfuter mon analyse, n’hésitez pas à laisser un commentaire avec si possible textes officiels à l’appui 😉
</p>
<p style="text-align: left;">
Affaire à suivre !
</p>




</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="kevinpolisano/blog" data-repo-id="R_kgDOM9ReCA" data-category="Announcements" data-category-id="DIC_kwDOM9ReCM4CmGgm" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="fr" crossorigin="anonymous" data-loading="lazy" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="light">
</div> <!-- /content -->




</body></html>